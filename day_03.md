#	1、用户和组

用户在登录时键入正确的用户名和口令后，就能够进入系统和自己的主目录

每个用户都有唯一的用户，并且Linux会分配一个唯一的UID与之对应

每一个用户组都会有唯一的名称，Linux会分配一个唯一的GID给每一个用户组

root用户的UID和GID都是0

用户名和UID对应的关系都记录在/etc/passwd

用户名和GID对应的关系都记录在/etc/group

用户的密码信息记录在/etc/shadow

##	1.1、passwd格式

例子：root : x : 0 : 0 : root : /root : /bin/bash

```
root		用户名
x			早期在这里记录密码，现在作废
0			UID
0			GID
root		注释
/root		家目录
/bin/bash	登录后所使用的Shell
```

##	1.2、shadow格式

例子：root : $1$lrKCOpzq$IHP2BuuKxMdLaBw/ : 17877 : 0 : 99999 : 7 : : : 

```
root									用户名
$1$lrKCOpzq$IHP2BuuKxMdLaBw/			密码
17877									最后一次修改密码的日期(从1970-1-1开始)
0										密码几日内不可修改(0表示可以随时修改)
7										密码失效的宽限天数
										账号失效日期
										保留字段
```

##	1.3、group格式

例子：wheel : x : 10 : bob,tom

```
wheel				组名
x					组密码(已经弃用)
10					GID(组ID)
bob,tom				组成员
```

#	2、用户的管理

##	2.1、添加用户

Linux提供了集成的系统管理工具userconf，它可以用来对用户账号进行统一管理

增加用户账号就是在/etc/passwd文件中为新用户增加一条记录，同时更新其他系统文件如/etc/shadow, /etc/group等

方法：useradd -mU -G 组名 用户名

```
-m			在/home目录创建用户的家目录
-U			创建与用户同名的组
-G			新账户的附加组列表
-c			指定一段注释性描述
```

##	2.2、删除用户

删除用户账号就是要将/etc/passwd等系统文件中的该用户记录删除，必要时还删除用户的主目录

方法：userdel -r 用户名

它的作用是把用户的主目录一起删除

```
-r			删除主目录和邮件池
-f			强制删除该用户
```

##	2.3、修改用户密码

方法：passwd 用户名

```
-l 			锁定口令，即禁用账号
-u 			口令解锁
-d 			使账号无口令
-f 			强迫用户下次登录时修改口令
```

##	2.4、切换用户

方法：

su 用户名：仅仅切换用户身份

su - 用户名：完全以这个用户进行登录，会初始化当前用户的设置

##	2.5、查看用户和组的信息

方法：

id 查看用户个人的UID、GID、组信息

id -u 查看用户的UID

id -g 查看用户的GID

#	3、用户组管理

##	3.1、添加组

方法：groupadd -p 组名

```
-g			为新组使用GID
-p			为新组使用次加密过得密码
-r			创建一个系统账户
```

##	3.2、删除组

方法：groupdel 组名

```
-o 		与-g选项同时使用，用户组的新GID可以与系统已有用户组的GID相同
-n		新用户组 将用户组的名字改为新名字
```

##	3.3、修改用户属性

方法：usermod -d 组名

```
-d					用户的新主目录
-g					强制使用GROUP为新主组
-G					新的附加组列表GROUP
-a					将用户追加至上边-G中提到的附加组中，并不从其他组中删除此用户
-L					锁定用户账号
-m					将家目录内容移至新的位置(仅与-d一起使用)
-s					该用户账户的新登录shell
-u					解锁用户账号
```

#	4、查看登录的用户

```
w					查看谁正在登陆，并显示每个登录用户正在执行的任务
who					查看谁在登录
last				查看历史登录记录
lastb				查看失败的登录记录
lastlog				查看全部用户最后一次登陆的时间
```

#	5、文件权限

##	5.1、权限的定义

Linux为文件或目录设置了三种权限

```
r			read，读权限
w			write，写权限
x			execute，执行权限
```

不同身份的用户对文件的执行权限分为三种

```
user	文件的拥有者
group	同组人
other	其他人
```

使用 ls -l 可以看到文件的权限信息

最左边是每一个文件的权限信息，一共包含9个基本权限，分别是user/group/other,他们有自己的read/write/execute权限

第一个 - 忽略

rwx：分别对应的是：读、写、可执行的权限

```
-rwxr-xr-- 1 bob staff 9824 8 28 21:22 test.py
-rw-r--r-- 1 tom staff 10787 8 27 12:57 01.md
-rw-r----- 1 tom staff 5053 8 28 23:42 sun.jpg
```

![2](/home/w/总结/Day03/2.png)

##	5.2、权限的修改

**通过符号修改权限**

![1](/home/w/总结/Day03/1.png)

设置自己可读可写可执行，同组可读可执行，其他人可执行：chmod u = rwx, g=rx, o=x test.py

给自己和同组人增加读写权限：chmod ug+rw abc.png

给同组人和其他人删除写权限：chmod go-w abc.png

给所有人增加执行权限：chmod a+x test.py

**通过数字修改权限**

**r=4，w=2，x=1**

**rwx属性：4+2+1=7**

chmod 753 test.py

7/5/3这三个数字分别对应着user/group/other三个身份，对应的二进制分别是111//101/011

```
数字				二进制				权限
 7				   111				rwx
 5				   101				r-x
 3				   011				-wx
```

##	5.3、修改文件拥有者

方法：chown 用户：组 文件

#	6、文件操作

```
echo xyz ：打印文本
echo xyz > a.txt ：将输出的文本重定向到a.txt中，a.txt原来内容会被覆盖
echo xyz >> a.txt ：将输出的文本追加到文件a.txt中，a.txt原来内容不会被覆盖
cat 文件名：查看文件
head -n N 文件名：查看文件的前N行
tail -n N 文件名：查看文件的第N行
less 文件：快速浏览文件
			按 j 向下
			按 k 向上
			按 f 向下翻屏
			按 b 向上翻屏
			按 g 到全文的开头
			按 G 到全文的结尾
			按 q 退出
sort 文本或文件：将结果按升序排序
sort -r 文本或文件：将结果按降序排序
uniq 去重，依赖排序，常跟在sort后面使用
awk ‘{print $N}’ 打印出N列
wc 字符统计
	-c：统计字符
	-w：统计单词
	-l：统计行
管道符：|	连接两个命令，将前面的输出作为后面的输入
文本过滤grep
	-i：忽略大小写
	-r：忽略二进制
	-I：忽略二进制文件
	-n：打印行号
	-c：只显示匹配到的个数
	-o：只显示匹配的单词
	-E：通过正则表达式匹配
	--include=‘*.py’：仅包含py文件
	--exclude='*.js'：仅包含js文件
```

#	7、vim

用户学习了各种各样的文本间移动/跳转的命令和其他的普通模式的编辑命令，并且能够灵活组合使用的话，能够比那些没有模式的编辑器更加高效的进行文本编辑

vim是终端下最常用的编辑器，有“编辑器之神”简称，简洁而强大

vim分三种模式：命令模式，插入模式，底栏命令模式

**按esc，进入命令模式**

```
h,j,k,l：光标的坐、下、上、右移动
yy：复制整行
yw：复制光标后面的内容
P：粘贴到上一行
p：粘贴到下一行
dd：删除整行
d3w：向前删除3个单词
c3w：剪切3个单词
7x：删除7个字符
u：撤销
>>：增加缩进
<<： 减少缩进
x：删除当前字符
3x：删除当前光标开始向后三个字符
X：删除当前字符的前一个字符
dl：删除当前字符
dh：删除前一个字符
dd：删除当前行
dj：删除上一行
dk：删除下一行
gg：跳至文件首行
ctrl + e：向下移动
ctrl + y：向上移动
ctrl + f：向下翻屏
ctrl + b：向上翻屏
ctrl + r：恢复撤销的内容(回撤)
ctrl + v：列编辑
shift + g：跳至文件结尾
shift + h：跳至屏幕首行
shift + m：跳至屏幕中间
shift + l：跳至屏幕结尾
shift + v：选中整列
shift + >：向右缩紧
shift + <：向左缩紧
```

**按 i 键进入插入模式**

正常输入，想做其他操作必须先按ESC键回到命令模式

**在命令模式按：键，进入底栏命令模式**

```
23 跳至文件的第23行
%s/abc/123/g 把文件中的所有abc替换成123
set nu 打开行号
set nonu 关闭行号
w 保存
q 退出
wq 保存并退出
```

vim配置文件 ~/.vimrc